{"version":3,"file":"parseBanners.js","sources":["parseBanners.js"],"sourcesContent":["const setBanner = (() => {\n\tconst url = \"https://anettaschool.ru/banners-page\";\n\n\tif(!window.location.href.includes(\"/teach\")) return;\n\n\tasync function fetchBannersData() {\n\t\ttry {\n\t\t\tconst response = await fetch(url);\n\t\t\treturn await response.text();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Отсутствуют данные: \", error);\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tasync function getBanners() {\n\t\tconst lessonList = document.querySelector(\".lesson-list\");\n\t\tconst streamTable = document.querySelector(\".stream-table\");\n\n\t\tif (!lessonList && !streamTable) {\n\t\t\tconsole.error(\"Нет элементов\");\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst container = document.createElement(\"div\");\n\t\t\tcontainer.classList.add(\"banner-wrapper\");\n\t\t\tconst bannerData = await fetchBannersData();\n\n\t\t\tif (!bannerData) return;\n\n\t\t\tconst parser = new DOMParser();\n\t\t\tconst doc = parser.parseFromString(bannerData, \"text/html\");\n\t\t\tconst bannersElements = Array.from(doc.querySelectorAll(\".banner-item\"));\n\n\t\t\tbannersElements.forEach((banner) => {\n\t\t\t\tcontainer.appendChild(banner);\n\t\t\t});\n\n\t\t\tif (lessonList) {\n\t\t\t\tlessonList.prepend(container);\n\t\t\t} else if (streamTable) {\n\t\t\t\tstreamTable.prepend(container);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Ошибка getBanners: \", error);\n\t\t}\n\t};\n\n\tconst rotateBanners = () => {\n\t\tconst bannerWrapper = document.querySelector(\".banner-wrapper\");\n\t\tconst banners = Array.from(bannerWrapper.querySelectorAll(\".banner-item\"));\n\n\t\tif (!bannerWrapper) return;\n\n\t\tlet lastBanner = banners.shift();\n\n\t\tbanners.push(lastBanner);\n\t\tbannerWrapper.innerHTML = \"\";\n\t\tbanners.forEach(banner => bannerWrapper.append(banner));\n\t};\n\n\treturn { \n\t\tget: getBanners,\n\t\trotate: rotateBanners\n\t};\n})();\n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n\tsetBanner.get();\n\tsetInterval(() => setBanner.rotate(), 7000);\n});"],"names":["setBanner","url","window","location","href","includes","get","async","lessonList","document","querySelector","streamTable","container","createElement","classList","add","doc","bannerData","await","fetch","text","error","console","DOMParser","parseFromString","Array","from","querySelectorAll","forEach","appendChild","banner","prepend","rotate","bannerWrapper","lastBanner","banners","shift","push","innerHTML","append","addEventListener","setInterval"],"mappings":"AAAA,IAAMA,WAAY,KACjB,IAAMC,EAAM,uCAEZ,GAAIC,OAAOC,SAASC,KAAKC,SAAS,QAAQ,EA2D1C,MAAO,CACNC,IAhDDC,iBACC,IAAMC,EAAaC,SAASC,cAAc,cAAc,EAClDC,EAAcF,SAASC,cAAc,eAAe,EAE1D,GAAKF,GAAeG,EAKpB,IACC,IAAMC,EAAYH,SAASI,cAAc,KAAK,EAC9CD,EAAUE,UAAUC,IAAI,gBAAgB,EACxC,IAKMC,EALAC,EAAaC,MAtBrBX,UACC,IAEC,OAAOW,MADUA,MAAMC,MAAMlB,CAAG,GACVmB,KAAK,CAI5B,CAHE,MAAOC,GAER,MADAC,QAAQD,MAAM,uBAAwBA,CAAK,EACrCA,CACP,CACD,GAc4C,EAErCJ,IAGCD,GADS,IAAIO,WACAC,gBAAgBP,EAAY,WAAW,EAClCQ,MAAMC,KAAKV,EAAIW,iBAAiB,cAAc,CAAC,EAEvDC,QAAQ,IACvBhB,EAAUiB,YAAYC,CAAM,CAC7B,CAAC,EAEGtB,EACHA,EAAWuB,QAAQnB,CAAS,EAClBD,GACVA,EAAYoB,QAAQnB,CAAS,EAI/B,CAFE,MAAOS,GACRC,QAAQD,MAAM,sBAAuBA,CAAK,CAC3C,MA1BCC,QAAQD,MAAM,eAAe,CA2B/B,EAiBCW,OAfqB,KACrB,IAAMC,EAAgBxB,SAASC,cAAc,iBAAiB,EAC9D,IAIIwB,EAJEC,EAAUV,MAAMC,KAAKO,EAAcN,iBAAiB,cAAc,CAAC,EAEpEM,IAEDC,EAAaC,EAAQC,MAAM,EAE/BD,EAAQE,KAAKH,CAAU,EACvBD,EAAcK,UAAY,GAC1BH,EAAQP,QAAQE,GAAUG,EAAcM,OAAOT,CAAM,CAAC,EACvD,CAKA,CACA,GAAE,EAGHrB,SAAS+B,iBAAiB,mBAAoB,KAC7CxC,UAAUM,IAAI,EACdmC,YAAY,IAAMzC,UAAUgC,OAAO,EAAG,GAAI,CAC3C,CAAC"}